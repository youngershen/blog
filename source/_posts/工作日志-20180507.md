---
title: 工作日志-20180507
date: 2018-05-07 23:21:01
tags: 工作日志
category: 工作
---

## 摘要

* 给 「保险保单爬虫」的客户邮寄了合同，二期项目正式开启。

* 修复了 HHCraelr 的配置模块，因为之前做的比较粗糙
没有把日志模块独立出来，导致在多个地方读取配置文件的时候反复读取磁盘，现在把配置模块独立出来用 module 做成了一个伪单例，这样就不会有性能问题了。

* 修复了 HHCrawler 的日志模块，之前的日志也是因为开发时间的关系没有把文件分批存放导致时间长了小文件会过多，现在增加了 2 个 handler 用来分批存文件和日志直接入库。

* 修复了 HHCraweler 遗留的数据库问题，看了几个 ORM 都不是很好用，有的太复杂（SQLAlchemy），有的没有迁移功能（SQLAlchemy）导致开发不够敏捷，所以最终还是选择了将现有的项目与 DJANGO 集成在一起，但是只使用其中的 ORM 功能，已经成功了，效果不错，这样即有了迁移又有了 ORM，一举两得，不过就是配置起来稍微麻烦有点，稍后可以写一个帖子供别人参考。

## 统计

* 工作时段 : 14:00 - 18:00， 20：00 - 23：30
* 工作时长 : 7.5 Hours
* 读书 : 0 Hours
* 写作 : 0.1 Hour
* 练琴 : 0 Hour
* 发呆 : 0 Hour


## 备注

今天总算是要开始搞 HHCrawler 的二期了，二期的需求不是很复杂， 不过我打算好好做，把之前比较粗糙的部分改造的细致舒适一点。

晚上把 DJANGO 的 ORM 集成进了现有的系统，本来感觉很简单，想不到搞了 3 个多小时，不知不觉就快 12 点了，不过还是成功的集成上了，DJANGO 的 ORM 虽然被很多人诟病，但是用起来比其他的 PYTHON 平台的 ORM 产品舒适太多了。

本来打算要更新公众号，但是今天太累了，没有精力搞了，而且不希望内容粗制滥造，所以今天就不搞公众号了